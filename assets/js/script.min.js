(function($) {
    let secure = [];

	$('iframe').each(function(i) {
        var type,
            yt = 'YouTube',
            ytpL = 'https://policies.google.com/privacy?hl=de&gl=de',
            gm = 'GoogleMaps',
            gmpL = 'https://policies.google.com/privacy?hl=de&gl=de',
            protectLink,
            src = $(this).attr('src'),
            width = $(this).attr('width'),
            height = $(this).attr('height');

        if(src.indexOf('youtube.com') > -1) {
            type = yt;
            protectLink = ytpL;
            src = src.replace('youtube.com', 'youtube-nocookie.com');
        } else if(src.indexOf('y2u.be') > -1) {
            type = yt;
            protectLink = ytpL;
            src = src.replace('y2u.be', 'youtube-nocookie.com');
        } else if(src.indexOf('youtu.be') > -1) {
            type = yt;
            protectLink = ytpL;
            src = src.replace('youtu.be', 'youtube-nocookie.com');
        } else if(src.indexOf('youtube-nocookie.com') > -1) {
            type = yt;
            protectLink = ytpL;
            src = src;
        } else if(src.indexOf('maps') > -1) {
            type = gm;
            protectLink = gmpL;
            src = src;
        }

        let html = '<div class="gdpr-dsgvo-container">';
            html += '<p>';
            html += '<strong>Hinweis</strong>';
            html += '</p>';
            html += '<p>';
            html += 'Dieser Frame wurde gesperrt<br/>';
            html += type + ' <a href="' + protectLink + '" target="_blank">Datenschutzbestimmungen</a> aufrufen.';
            html += '</p>';
            html += '<button href="#" id="gdpr-accept">Hiermit aktzeptiere ich den Datenschutz!</button>';
            html += '</div>';

        secure[i] = {
            type: type,
            width: width,
            height: height,
            src: src
        };

        $(this).attr('src','').attr('height', 0).attr('width', 0);
        $(html).insertAfter($(this));
    });

    $('#gdpr-accept').live('click', function(e) {
        e.preventDefault();
        $('iframe').each(function(i){
            $(this).attr('src', secure[i]['src']).attr('width', secure[i]['width']).attr('height', secure[i]['height']);
            $('.gdpr-dsgvo-container').remove();
        });
    });

    console.log(secure);
})( jQuery );